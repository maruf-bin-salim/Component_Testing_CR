let products = [
  {
    product_id: "1",
    name: "car toy",
    base_image: "https://picsum.photos/200",
    category: "electronics",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "2",
    name: "ben 10 figure",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "3",
    name: "star wars figure",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "4",
    name: "bucket",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "5",
    name: "scrub brush",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "6",
    name: "shirt",
    base_image: "https://picsum.photos/200",
    category: "clothing",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "8",
    name: "t-shirt",
    base_image: "https://picsum.photos/200",
    category: "clothing",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "9",
    name: "sweatshirt",
    base_image: "https://picsum.photos/200",
    category: "clothing",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "10",
    name: "jacket",
    base_image: "https://picsum.photos/200",
    category: "clothing",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "11",
    name: "air conditioner",
    base_image: "https://picsum.photos/200",
    category: "electronics",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "12",
    name: "bread maker",
    base_image: "https://picsum.photos/200",
    category: "electronics",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "13",
    name: "bulb",
    base_image: "https://picsum.photos/200",
    category: "electronics",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "14",
    name: "blender",
    base_image: "https://picsum.photos/200",
    category: "electronics",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "15",
    name: "balls",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "16",
    name: "ball pits",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "17",
    name: "cars",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "18",
    name: "boats",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "19",
    name: "bubbles",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "20",
    name: "balloons",
    base_image: "https://picsum.photos/200",
    category: "toys",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "21",
    name: "toilet brush",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "22",
    name: "broom",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "23",
    name: "glass cleaner",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "7",
    name: "pant",
    base_image: "https://picsum.photos/200",
    category: "clothing",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "24",
    name: "mop",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },

  {
    product_id: "25",
    name: "dustpan",
    base_image: "https://picsum.photos/200",
    category: "home",

    images: [
      {
        color_code: "#dbdbdb",
        image: "https://picsum.photos/200",
      },
    ],
  },
];

// to simulate a delay in the api response
async function simulatedDelay() {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve();
    }, 1500);
  });
}

export default async function handler(req, res) {
  let page = req.query.page || 1;
  let page_size = req.query.page_size || 20;
  let total_count = products.length;

  await simulatedDelay();
  let results = products.slice((page - 1) * page_size, page * page_size);
  res.status(200).json({
    meta: {
      page: page,
      page_size: page_size,
      total_count: total_count,
    },
    results: results,
  });
}
